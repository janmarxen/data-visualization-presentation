<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>t-SNE for Graph Layouts - Data Visualization Presentation</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .slide-frame {
            width: 90vw;
            max-width: 1280px;
            aspect-ratio: 16/9;
            border: none;
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
            background: white;
            margin: 40px auto;
            display: block;
        }
        .nav-arrows {
            display: flex;
            gap: 8px;
            margin-left: 24px;
            margin-top: 5px;
            margin-bottom: 15px;
        }
        .arrow-btn {
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #5a6c7d 0%, #6b7d8f 100%);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .arrow-btn:hover {
            background: linear-gradient(135deg, #4a5d6e 0%, #3b4d5e 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        .arrow-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .slide-counter {
            text-align: center;
            background: linear-gradient(135deg, #5a6c7d 0%, #6b7d8f 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
            margin-left: 20px;
            display: inline-block;
            box-shadow: 0 6px 15px rgba(0,0,0,0.2);
        }
        .progress-bar {
            background: rgba(255,255,255,0.3);
            height: 6px;
            border-radius: 3px;
            margin: 15px auto 30px;
            max-width: 800px;
            overflow: hidden;
        }
        .progress-fill {
            background: linear-gradient(90deg, #5a6c7d 0%, #6b7d8f 100%);
            height: 100%;
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        .slide-title {
            text-align: center;
            color: white;
            font-size: 1.2rem;
            margin-top: 30px;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div class="slide-title" id="slideTitle">t-SNE for Graph Layouts: Visualizing High-Dimensional Data</div>
    
    <div class="slide-counter" id="slideCounter"></div>
    
    <div class="nav-arrows">
        <button class="arrow-btn" onclick="previousSlide()" id="prevBtn">‹</button>
        <button class="arrow-btn" onclick="nextSlide()" id="nextBtn">›</button>
    </div>
    
    <div class="progress-bar">
        <div class="progress-fill" id="progressFill" style="width: 8.33%"></div>
    </div>
    
    <div id="slideContainer"></div>
    
    <script>
        const slides = [
            // Title and Introduction
            { file: 'slides/01-title.html', title: 't-SNE for Graph Layouts' },
            { file: 'slides/02-problem-description.html', title: 'The Challenge of Graph Layouts' },
            { file: 'slides/03-tsne-promise.html', title: 'The Promise of t-SNE' },
            { file: 'slides/04-distance-vs-neighborhood.html', title: 'Distance vs Neighborhood Preserving' },
            
            // Mathematical Explanation (slides 5-7)
            { file: 'slides/05-tSNE.html', title: 't-distributed Stochastic Neighbor Embedding (t-SNE)' },
            { file: 'slides/06-tsNET.html', title: 'tsNET: Graph Layout by t-SNE' },
            { file: 'slides/07-ComputationalAspects.html', title: 'tsNET: Implementation' },
            
            // Results and Evaluation
            { file: 'slides/08-results.html', title: 'Visual Results' },
            { file: 'slides/09-modern-alternatives.html', title: 'Modern Alternatives' },
            { file: 'slides/10-opinions.html', title: 'Opinions' },
            
            // Closing
            { file: 'closing.html', title: 'Thank You' }
        ];
        
        let currentSlide = 0;
        const slideCounter = document.getElementById('slideCounter');
        const slideContainer = document.getElementById('slideContainer');
        const slideTitle = document.getElementById('slideTitle');
        const progressFill = document.getElementById('progressFill');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');

        function updateUI() {
            const slide = slides[currentSlide];
            slideCounter.textContent = `${currentSlide + 1} / ${slides.length}`;
            slideTitle.textContent = slide.title;

            // Update progress bar
            const progress = ((currentSlide + 1) / slides.length) * 100;
            progressFill.style.width = `${progress}%`;

            // Update button states
            prevBtn.disabled = currentSlide === 0;
            nextBtn.disabled = currentSlide === slides.length - 1;
        }

        function showSlide(n) {
            currentSlide = Math.max(0, Math.min(n, slides.length - 1));
            const slide = slides[currentSlide];

            // show loading placeholder
            slideContainer.innerHTML = `
                <div style="display:flex;align-items:center;justify-content:center;height:100%;min-height:360px;\n                font-family:system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;\n                ">
                    Loading...
                </div>`;

            // Try to fetch the slide (works when served over HTTP). If fetch fails (e.g., opened via file://), fall back to an iframe.
            fetch(slide.file)
                .then(response => {
                    if (!response.ok) throw new Error('Network response was not ok');
                    return response.text();
                })
                .then(html => {
                    // Extract only the content inside <body>
                    const bodyMatch = html.match(/<body[^>]*>([\s\S]*)<\/body>/i);
                    slideContainer.innerHTML = bodyMatch ? bodyMatch[1] : html;
                    updateUI();

                    // Auto-scroll to center the slide content
                    setTimeout(() => {
                        slideContainer.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'start',
                            inline: 'nearest'
                        });
                    }, 100);
                })
                .catch(error => {
                    console.warn('Fetch failed, falling back to iframe for', slide.file, error);
                    // Create iframe fallback so the presentation still works when opened from the filesystem
                    const iframe = document.createElement('iframe');
                    iframe.src = slide.file;
                    iframe.className = 'slide-frame';
                    iframe.title = slide.title || 'slide';
                    // Clear and append iframe
                    slideContainer.innerHTML = '';
                    slideContainer.appendChild(iframe);
                    updateUI();
                });
        }
        
        function nextSlide() {
            if (currentSlide < slides.length - 1) {
                showSlide(currentSlide + 1);
            }
        }
        
        function previousSlide() {
            if (currentSlide > 0) {
                showSlide(currentSlide - 1);
            }
        }
        
        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextSlide();
            } else if (e.key === 'ArrowLeft') {
                e.preventDefault();
                previousSlide();
            }
        });
        
    // Initialize UI and then load first slide
    // Ensure counters/progress reflect slides.length before fetch completes
    updateUI();
    showSlide(0);
    </script>
</body>
</html>
